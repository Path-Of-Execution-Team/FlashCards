apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend
spec:
  template:
    metadata:
      annotations:
        vault.hashicorp.com/role: "flashcards-backend-dev"
        vault.hashicorp.com/agent-inject-secret-backend-config.properties: "kv/data/flashcards-dev/backend"
        vault.hashicorp.com/agent-inject-template-backend-config.properties: |
          {{- with secret "kv/data/flashcards-dev/backend" -}}
          spring.datasource.password={{ .Data.data.SPRING_DATASOURCE_PASSWORD }}
          jwt.secret={{ .Data.data.JWT_SECRET }}
          {{- end }}
